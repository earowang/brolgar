<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>longitudinal-data-structures • brolgar</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="longitudinal-data-structures">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">brolgar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.9100</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/brolgar.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basic_exploration.html">Starting Steps</a>
    </li>
    <li>
      <a href="../articles/creating-features.html">creating-features</a>
    </li>
    <li>
      <a href="../articles/find-summary-keys.html">Finding summary keys</a>
    </li>
    <li>
      <a href="../articles/longitudinal-data-structures.html">longitudinal-data-structures</a>
    </li>
    <li>
      <a href="../articles/stats_on_stats.html">Stats on Stats: Workflows with Longnostics</a>
    </li>
    <li>
      <a href="../articles/visualisation-gallery.html">Visualisation Gallery</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>longitudinal-data-structures</h1>
            
      
      
      <div class="hidden name"><code>longitudinal-data-structures.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(brolgar)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">#&gt; Attaching package: 'dplyr'</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">#&gt; The following objects are masked from 'package:stats':</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="co">#&gt;     filter, lag</span></a>
<a class="sourceLine" id="cb1-8" title="8"><span class="co">#&gt; The following objects are masked from 'package:base':</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-10" title="10"><span class="co">#&gt;     intersect, setdiff, setequal, union</span></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tsibble)</a>
<a class="sourceLine" id="cb1-12" title="12"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="co">#&gt; Attaching package: 'tsibble'</span></a>
<a class="sourceLine" id="cb1-14" title="14"><span class="co">#&gt; The following object is masked from 'package:dplyr':</span></a>
<a class="sourceLine" id="cb1-15" title="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="co">#&gt;     id</span></a></code></pre></div>
<p>All data has structure. There are ways that we can specify some permanent structure to the data, which gives some useful features later on, for free. This vignette discusses how to structure your longitudinal data as a time series, and what that means.</p>
<p>This idea, that longitudinal data is a time series, is <strong>Big Ideas #1</strong> behind the <code>brolgar</code> package:</p>
<blockquote>
<p>There is a permanent structure to your longitudinal data that we need to document and account for. This can be achieved by consider longitudinal data as a type of <em>time series</em> data.</p>
</blockquote>
<p>Now, there are many different ways to think about <em>what your data looks like</em>. Longitudinal data is often typically called “panel data”, for example. I used to always think that “time series” was defined as something that was by definition “regular” - with equal spacings between observations. This is actually not the case - you can have both “regular”, and “irregular” time series. Don’t believe me? Well, take it up with Professors Rob Hyndman and George Athanasopolous, who say:</p>
<blockquote>
<p>Anything that is observed sequentially over time is a time series. (<a href="https://otexts.com/fpp2/data-methods.html" class="uri">https://otexts.com/fpp2/data-methods.html</a>)</p>
</blockquote>
<p>OK, so what’s the big deal with this, why care? Well, it turns out that if we define our data as a time series object, we can get access to a whole suite of really nice tools to handle time series data.</p>
<p>We can now convert our longitudinal data into a really nice format called a <code>tsibble</code>, which stands for “<strong>t</strong>ime <strong>s</strong>eries tibble”, built on top of the <code>tibble</code>.</p>
<p>How do we convert our longitudinal data to time series? We need to consider the following:</p>
<ul>
<li>What identifies the time component of the data? This is the <strong>index</strong>
</li>
<li>What is the unique identifier of an individual/series? This is the <strong>key</strong>
</li>
</ul>
<p>Together, the <strong>index</strong> and <strong>key</strong> uniquely identify an observation.</p>
<p>What do we mean by this? Let’s look at the first section of the wages data:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(wages, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="co">#&gt; # A tibble: 10 x 9</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="co">#&gt;       id   lnw exper   ged postexp black hispanic   hgc uerate</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">#&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;int&gt;    &lt;int&gt; &lt;int&gt;  &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">#&gt;  1    31  1.49 0.015     1   0.015     0        1     8   3.21</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#&gt;  2    31  1.43 0.715     1   0.715     0        1     8   3.21</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="co">#&gt;  3    31  1.47 1.73      1   1.73      0        1     8   3.21</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="co">#&gt;  4    31  1.75 2.77      1   2.77      0        1     8   3.3 </span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="co">#&gt;  5    31  1.93 3.93      1   3.93      0        1     8   2.89</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="co">#&gt;  6    31  1.71 4.95      1   4.95      0        1     8   2.49</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#&gt;  7    31  2.09 5.96      1   5.96      0        1     8   2.6 </span></a>
<a class="sourceLine" id="cb2-12" title="12"><span class="co">#&gt;  8    31  2.13 6.98      1   6.98      0        1     8   4.8 </span></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="co">#&gt;  9    36  1.98 0.315     1   0.315     0        0     9   4.89</span></a>
<a class="sourceLine" id="cb2-14" title="14"><span class="co">#&gt; 10    36  1.80 0.983     1   0.983     0        0     9   7.4</span></a></code></pre></div>
<p>We have the <code>id</code> column, which identifies an individual.</p>
<p>We also have the <code>exper</code> column, which identifies the <code>exper</code>ience an individual has.</p>
<p>So:</p>
<ul>
<li>key: <code>id</code>
</li>
<li>index: <code>exper</code>
</li>
</ul>
<p>We can specify these things using the <code>as_tsibble</code> function from <code>tsibble</code>, also stating, <code>regular = FALSE</code>, since we have an <code>irregular</code> time series.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tsibble)</a>
<a class="sourceLine" id="cb3-2" title="2">wages_ts &lt;-<span class="st"> </span><span class="kw"><a href="https://tsibble.tidyverts.org/reference/as-tsibble.html">as_tsibble</a></span>(<span class="dt">x =</span> wages,</a>
<a class="sourceLine" id="cb3-3" title="3">                       <span class="dt">key =</span> id,</a>
<a class="sourceLine" id="cb3-4" title="4">                       <span class="dt">index =</span> exper,</a>
<a class="sourceLine" id="cb3-5" title="5">                       <span class="dt">regular =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<p>What does it look like?</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">wages_ts</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; # A tsibble: 6,402 x 9 [!]</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt; # Key:       id [888]</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt;       id ln_wages    xp   ged postexp black hispanic high_grade</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt;    &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;int&gt;    &lt;int&gt;      &lt;int&gt;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt;  1    31     1.49 0.015     1   0.015     0        1          8</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt;  2    31     1.43 0.715     1   0.715     0        1          8</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt;  3    31     1.47 1.73      1   1.73      0        1          8</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt;  4    31     1.75 2.77      1   2.77      0        1          8</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt;  5    31     1.93 3.93      1   3.93      0        1          8</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt;  6    31     1.71 4.95      1   4.95      0        1          8</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt;  7    31     2.09 5.96      1   5.96      0        1          8</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt;  8    31     2.13 6.98      1   6.98      0        1          8</span></a>
<a class="sourceLine" id="cb4-14" title="14"><span class="co">#&gt;  9    36     1.98 0.315     1   0.315     0        0          9</span></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="co">#&gt; 10    36     1.80 0.983     1   0.983     0        0          9</span></a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt; # … with 6,392 more rows, and 1 more variable: unemploy_rate &lt;dbl&gt;</span></a></code></pre></div>
<p>In particular, the following information is printed at the top:</p>
<pre><code># A tsibble: 6,402 x 9 [!]
# Key:       id [888]
...</code></pre>
<p>This says, we have 6402 rows, with 9 columns. The <code>!</code> means that there is no regular spacing between series, and then our “key” is <code>id</code>, of which there 888.</p>
<p>The <code>wages_ts</code> dataset is actually already made available inside the <code>brolgar</code> package, so you won’t need to do this.</p>
<div id="so-what" class="section level1">
<h1 class="hasAnchor">
<a href="#so-what" class="anchor"></a>So what?</h1>
<p>So why did we do this? Because this idea is very core to the rest of the package, and I wanted to have a place that demonstrated <em>how</em> to do this. The other vignettes in the package will show <em>why</em> that is useful.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#so-what">So what?</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Nicholas Tierney, Di Cook, Tania Prvan.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '48bc42eefc5234a6463c3b99e53dfda1',
    indexName: 'brolgar',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
